#!/usr/bin/env bash
set -euo pipefail

repo="$(git rev-parse --show-toplevel)"

docker run --rm -v "${repo}":/app -w /app clojure:temurin-21-lein lein lint
docker run --rm -v "${repo}":/app -w /app clojure:temurin-21-lein lein fmt:check
docker build -t research-test -f "${repo}/Dockerfile.test" "${repo}"
docker run --rm research-test
